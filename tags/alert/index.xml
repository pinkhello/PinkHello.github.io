<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>alert on pinkhello</title><link>https://pinkhello.cc/tags/alert/</link><description>Recent content in alert on pinkhello</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>pinkhello</copyright><lastBuildDate>Mon, 10 May 2021 08:00:00 +0800</lastBuildDate><atom:link href="https://pinkhello.cc/tags/alert/index.xml" rel="self" type="application/rss+xml"/><item><title>记一次docker日志磁盘告警问题</title><link>https://pinkhello.cc/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 10 May 2021 08:00:00 +0800</pubDate><guid>https://pinkhello.cc/posts/15-%E8%AE%B0%E4%B8%80%E6%AC%A1docker%E6%97%A5%E5%BF%97%E7%A3%81%E7%9B%98%E5%91%8A%E8%AD%A6%E9%97%AE%E9%A2%98/</guid><description>前景 今日，我正在开开心心的刷着JFX的Coding中，突然线上报警群中爆了个炸弹，EC2磁盘超过80%。
处理过程 解决问题姿势就位：
赶紧开机 ==》 ❤️中万匹🦙奔腾而过 ❤️中MMP
默默的通过跳板机进入目标机器
不管三七二十一,执行查看磁盘占用大小，我的乖乖，占用确实超过了87%了，一下子暴涨的
# 查看磁盘占用大小 &amp;gt; sudo df -h # 查看当前目录总量 &amp;gt; sudo du -sh 开始定位具体哪个文件或者目录占用这么大,跑到根目录下。 # 查看当前目录下一级子文件和子目录占用的磁盘容量 &amp;gt; sudo du -lh --max-depth=1 一开始猜想可能是docker容器的日志占用大，上面执行后，还真 TM 是 /var/lib/docker/containers 目录占用 42G 开始查看是哪个容器占用的这么大的空间 # 查看 containers 日志目录排序 &amp;gt; sudo du -d1 -h /var/lib/docker/containers | sort -h # 查看具体的哪个日志文件大 &amp;gt; sudo find /var/lib/docker/containers -name *.log 当然这个配图是我清理之后的 定位到最大的文件，一顿操作 # 清空比较大的日志文件 &amp;gt; sudo sh -c &amp;#34;cat /dev/null &amp;gt; ${log_file}&amp;#34; 思考 上面的方式是一种方式解决【临时】 # 查看 docker 的 Logging Driver &amp;gt; docker info | grep &amp;#39;Logging Driver&amp;#39; 如何彻底解决这个问题： 写个shell脚本 使用 crontab 定期执行清理 #!</description></item></channel></rss>
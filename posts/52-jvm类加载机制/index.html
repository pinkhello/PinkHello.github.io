<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>JVM类加载机制 | pinkhello</title><link rel=canonical href=https://pinkhello.cc/posts/52-jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/><meta name=description content="👷Hey! 我是 **pinkhello**，💻 一名后端程序员。**重要提示**: 在您阅读文章并评论之前，请先认真阅读[**评论承诺**](http://pinkhello.cc/promise)。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="JVM类加载机制"><meta property="og:description" content="类加载系统 JVM核心的结构里面有一个就是 类加载系统。 一个java代码经过编译器后变成class字节码文件，后续在运行时，字节码需要通过JVM的类加载系统执行运行。
类加载系统
类的加载过程 类的生命周期 类加载器种类 类加载机制 类生命周期 类的生命周期包括: 加载、链接（验证、准备、解析）、初始化、使用和卸载，
加载
通过类全限定名来获取二进制字节流、 字节流描述的静态存储结构转换为方法区的运行时数据结构 在Heap中生成一个代表这个类的Class对象，作为方法区访问这些数据的入口 链接
验证 确保被加载的类的正确性
文件格式验证，字节流是否符合Class文件格式，如0xCAFFBABE开头、版本号、常量类型等等 元数据验证, 多字节码描述性信息进行语义分析、确保符合规范 字节码验证 符号引用验证 准备 为类的 静态变量 分配内存，并将其初始化成默认值
解析 把类中的符号引用转换为直接引用(直接指向目标的指针、相对偏移量或间接定位到目标的句柄), 主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄、调用点限定符等符号引用进行。
类加载过程 加载、链接（验证、准备、解析）、初始化 属于 类加载的过程
类加载过程从上图可看见
第一个阶段 Loading 通过类的全限定名获取到该类的class二进制字节码流数据，将二进制流数据代表的静态存储结构转换成方法区运行时的数据结构
第二个阶段 Linking 验证 Verify: 保证class文件字节流是符合JVM的要求，确保安全 准备 Prepare: 为静态字段分配内存并设置初始化默认值（被final修饰的static字段不会设置，在编译阶段就分配了） 解析 Resolve: 解析是为了将常量迟的符号引用转换为直接引用(实际引用)，如果符号引用指向未被加载的类，或未被加载的类的字段或方法，那么解析触发了这个类的加载（但是不一定触发这个类的Linking和Initialization） 第三个阶段 Initialization 初始化阶段是执行类的构造方法，init() 的过程,(编译器自动收集类的所有变量赋值动作和静态代码块语句合并的） 若该类有父类,JVM保证父类先执行init然后执行子类的init
类加载器的分类 上面描述了类加载的机制，那么用于类加载的组件我们叫类加载器，而且类加载器是有分类的
Bootstrap ClassLoader 启动类加载器，是JVM内部实现的，Java语言程序无法直接操作，主要用来加载Java核心类库，诸如rt.jar、resources.jar、sun.boot.class.path目录下的包，用于JVM运行所需的包（一般只加载 包名为java、javax、sun开头的类）
它加载Extension ClassLoader和Application ClassLoader，并成为它们的父类加载器
Extension ClassLoader 扩展类加载器(sun.misc.Launcher$ExtClassLoader实现), 派生继承 java.lang.ClassLoader, 父类加载器是 启动类加载器, 加载 lib/ext 目录下的加载类库。可以将自己的包放到该目录下，就会自动加载进入"><meta property="og:type" content="article"><meta property="og:url" content="https://pinkhello.cc/posts/52-jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-03T17:30:49+08:00"><meta property="article:modified_time" content="2022-05-03T17:30:49+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="JVM类加载机制"><meta name=twitter:description content="类加载系统 JVM核心的结构里面有一个就是 类加载系统。 一个java代码经过编译器后变成class字节码文件，后续在运行时，字节码需要通过JVM的类加载系统执行运行。
类加载系统
类的加载过程 类的生命周期 类加载器种类 类加载机制 类生命周期 类的生命周期包括: 加载、链接（验证、准备、解析）、初始化、使用和卸载，
加载
通过类全限定名来获取二进制字节流、 字节流描述的静态存储结构转换为方法区的运行时数据结构 在Heap中生成一个代表这个类的Class对象，作为方法区访问这些数据的入口 链接
验证 确保被加载的类的正确性
文件格式验证，字节流是否符合Class文件格式，如0xCAFFBABE开头、版本号、常量类型等等 元数据验证, 多字节码描述性信息进行语义分析、确保符合规范 字节码验证 符号引用验证 准备 为类的 静态变量 分配内存，并将其初始化成默认值
解析 把类中的符号引用转换为直接引用(直接指向目标的指针、相对偏移量或间接定位到目标的句柄), 主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄、调用点限定符等符号引用进行。
类加载过程 加载、链接（验证、准备、解析）、初始化 属于 类加载的过程
类加载过程从上图可看见
第一个阶段 Loading 通过类的全限定名获取到该类的class二进制字节码流数据，将二进制流数据代表的静态存储结构转换成方法区运行时的数据结构
第二个阶段 Linking 验证 Verify: 保证class文件字节流是符合JVM的要求，确保安全 准备 Prepare: 为静态字段分配内存并设置初始化默认值（被final修饰的static字段不会设置，在编译阶段就分配了） 解析 Resolve: 解析是为了将常量迟的符号引用转换为直接引用(实际引用)，如果符号引用指向未被加载的类，或未被加载的类的字段或方法，那么解析触发了这个类的加载（但是不一定触发这个类的Linking和Initialization） 第三个阶段 Initialization 初始化阶段是执行类的构造方法，init() 的过程,(编译器自动收集类的所有变量赋值动作和静态代码块语句合并的） 若该类有父类,JVM保证父类先执行init然后执行子类的init
类加载器的分类 上面描述了类加载的机制，那么用于类加载的组件我们叫类加载器，而且类加载器是有分类的
Bootstrap ClassLoader 启动类加载器，是JVM内部实现的，Java语言程序无法直接操作，主要用来加载Java核心类库，诸如rt.jar、resources.jar、sun.boot.class.path目录下的包，用于JVM运行所需的包（一般只加载 包名为java、javax、sun开头的类）
它加载Extension ClassLoader和Application ClassLoader，并成为它们的父类加载器
Extension ClassLoader 扩展类加载器(sun.misc.Launcher$ExtClassLoader实现), 派生继承 java.lang.ClassLoader, 父类加载器是 启动类加载器, 加载 lib/ext 目录下的加载类库。可以将自己的包放到该目录下，就会自动加载进入"><link rel=stylesheet href=https://pinkhello.cc/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><link rel=stylesheet href=https://pinkhello.cc/css/pinkhello.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://pinkhello.cc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-M2FXWC325L","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://pinkhello.cc/posts/53-java%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E7%9A%84%E6%96%B9%E5%BC%8F/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://pinkhello.cc/posts/55-jvm%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84jmm/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&text=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&is_video=false&description=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6&body=Check out this article: https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&name=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6&description=%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%20JVM%e6%a0%b8%e5%bf%83%e7%9a%84%e7%bb%93%e6%9e%84%e9%87%8c%e9%9d%a2%e6%9c%89%e4%b8%80%e4%b8%aa%e5%b0%b1%e6%98%af%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%e3%80%82%20%e4%b8%80%e4%b8%aajava%e4%bb%a3%e7%a0%81%e7%bb%8f%e8%bf%87%e7%bc%96%e8%af%91%e5%99%a8%e5%90%8e%e5%8f%98%e6%88%90class%e5%ad%97%e8%8a%82%e7%a0%81%e6%96%87%e4%bb%b6%ef%bc%8c%e5%90%8e%e7%bb%ad%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%ef%bc%8c%e5%ad%97%e8%8a%82%e7%a0%81%e9%9c%80%e8%a6%81%e9%80%9a%e8%bf%87JVM%e7%9a%84%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%e6%89%a7%e8%a1%8c%e8%bf%90%e8%a1%8c%e3%80%82%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%0a%e7%b1%bb%e7%9a%84%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%20%e7%b1%bb%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%a7%8d%e7%b1%bb%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6%20%e7%b1%bb%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%20%e7%b1%bb%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%8c%85%e6%8b%ac%3a%20%e5%8a%a0%e8%bd%bd%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%88%e9%aa%8c%e8%af%81%e3%80%81%e5%87%86%e5%a4%87%e3%80%81%e8%a7%a3%e6%9e%90%ef%bc%89%e3%80%81%e5%88%9d%e5%a7%8b%e5%8c%96%e3%80%81%e4%bd%bf%e7%94%a8%e5%92%8c%e5%8d%b8%e8%bd%bd%ef%bc%8c%0a%e5%8a%a0%e8%bd%bd%0a%e9%80%9a%e8%bf%87%e7%b1%bb%e5%85%a8%e9%99%90%e5%ae%9a%e5%90%8d%e6%9d%a5%e8%8e%b7%e5%8f%96%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%ad%97%e8%8a%82%e6%b5%81%e3%80%81%20%e5%ad%97%e8%8a%82%e6%b5%81%e6%8f%8f%e8%bf%b0%e7%9a%84%e9%9d%99%e6%80%81%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%96%b9%e6%b3%95%e5%8c%ba%e7%9a%84%e8%bf%90%e8%a1%8c%e6%97%b6%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%20%e5%9c%a8Heap%e4%b8%ad%e7%94%9f%e6%88%90%e4%b8%80%e4%b8%aa%e4%bb%a3%e8%a1%a8%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84Class%e5%af%b9%e8%b1%a1%ef%bc%8c%e4%bd%9c%e4%b8%ba%e6%96%b9%e6%b3%95%e5%8c%ba%e8%ae%bf%e9%97%ae%e8%bf%99%e4%ba%9b%e6%95%b0%e6%8d%ae%e7%9a%84%e5%85%a5%e5%8f%a3%20%e9%93%be%e6%8e%a5%0a%e9%aa%8c%e8%af%81%20%e7%a1%ae%e4%bf%9d%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%e7%9a%84%e6%ad%a3%e7%a1%ae%e6%80%a7%0a%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%e9%aa%8c%e8%af%81%ef%bc%8c%e5%ad%97%e8%8a%82%e6%b5%81%e6%98%af%e5%90%a6%e7%ac%a6%e5%90%88Class%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%ef%bc%8c%e5%a6%820xCAFFBABE%e5%bc%80%e5%a4%b4%e3%80%81%e7%89%88%e6%9c%ac%e5%8f%b7%e3%80%81%e5%b8%b8%e9%87%8f%e7%b1%bb%e5%9e%8b%e7%ad%89%e7%ad%89%20%e5%85%83%e6%95%b0%e6%8d%ae%e9%aa%8c%e8%af%81%2c%20%e5%a4%9a%e5%ad%97%e8%8a%82%e7%a0%81%e6%8f%8f%e8%bf%b0%e6%80%a7%e4%bf%a1%e6%81%af%e8%bf%9b%e8%a1%8c%e8%af%ad%e4%b9%89%e5%88%86%e6%9e%90%e3%80%81%e7%a1%ae%e4%bf%9d%e7%ac%a6%e5%90%88%e8%a7%84%e8%8c%83%20%e5%ad%97%e8%8a%82%e7%a0%81%e9%aa%8c%e8%af%81%20%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e9%aa%8c%e8%af%81%20%e5%87%86%e5%a4%87%20%e4%b8%ba%e7%b1%bb%e7%9a%84%20%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f%20%e5%88%86%e9%85%8d%e5%86%85%e5%ad%98%ef%bc%8c%e5%b9%b6%e5%b0%86%e5%85%b6%e5%88%9d%e5%a7%8b%e5%8c%96%e6%88%90%e9%bb%98%e8%ae%a4%e5%80%bc%0a%e8%a7%a3%e6%9e%90%20%e6%8a%8a%e7%b1%bb%e4%b8%ad%e7%9a%84%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bd%ac%e6%8d%a2%e4%b8%ba%e7%9b%b4%e6%8e%a5%e5%bc%95%e7%94%a8%28%e7%9b%b4%e6%8e%a5%e6%8c%87%e5%90%91%e7%9b%ae%e6%a0%87%e7%9a%84%e6%8c%87%e9%92%88%e3%80%81%e7%9b%b8%e5%af%b9%e5%81%8f%e7%a7%bb%e9%87%8f%e6%88%96%e9%97%b4%e6%8e%a5%e5%ae%9a%e4%bd%8d%e5%88%b0%e7%9b%ae%e6%a0%87%e7%9a%84%e5%8f%a5%e6%9f%84%29%2c%20%e4%b8%bb%e8%a6%81%e9%92%88%e5%af%b9%e7%b1%bb%e6%88%96%e6%8e%a5%e5%8f%a3%e3%80%81%e5%ad%97%e6%ae%b5%e3%80%81%e7%b1%bb%e6%96%b9%e6%b3%95%e3%80%81%e6%8e%a5%e5%8f%a3%e6%96%b9%e6%b3%95%e3%80%81%e6%96%b9%e6%b3%95%e7%b1%bb%e5%9e%8b%e3%80%81%e6%96%b9%e6%b3%95%e5%8f%a5%e6%9f%84%e3%80%81%e8%b0%83%e7%94%a8%e7%82%b9%e9%99%90%e5%ae%9a%e7%ac%a6%e7%ad%89%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bf%9b%e8%a1%8c%e3%80%82%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%20%e5%8a%a0%e8%bd%bd%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%88%e9%aa%8c%e8%af%81%e3%80%81%e5%87%86%e5%a4%87%e3%80%81%e8%a7%a3%e6%9e%90%ef%bc%89%e3%80%81%e5%88%9d%e5%a7%8b%e5%8c%96%20%e5%b1%9e%e4%ba%8e%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e8%bf%87%e7%a8%8b%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e4%bb%8e%e4%b8%8a%e5%9b%be%e5%8f%af%e7%9c%8b%e8%a7%81%0a%e7%ac%ac%e4%b8%80%e4%b8%aa%e9%98%b6%e6%ae%b5%20Loading%20%e9%80%9a%e8%bf%87%e7%b1%bb%e7%9a%84%e5%85%a8%e9%99%90%e5%ae%9a%e5%90%8d%e8%8e%b7%e5%8f%96%e5%88%b0%e8%af%a5%e7%b1%bb%e7%9a%84class%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%ad%97%e8%8a%82%e7%a0%81%e6%b5%81%e6%95%b0%e6%8d%ae%ef%bc%8c%e5%b0%86%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%b5%81%e6%95%b0%e6%8d%ae%e4%bb%a3%e8%a1%a8%e7%9a%84%e9%9d%99%e6%80%81%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e6%88%90%e6%96%b9%e6%b3%95%e5%8c%ba%e8%bf%90%e8%a1%8c%e6%97%b6%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%0a%e7%ac%ac%e4%ba%8c%e4%b8%aa%e9%98%b6%e6%ae%b5%20Linking%20%e9%aa%8c%e8%af%81%20Verify%3a%20%e4%bf%9d%e8%af%81class%e6%96%87%e4%bb%b6%e5%ad%97%e8%8a%82%e6%b5%81%e6%98%af%e7%ac%a6%e5%90%88JVM%e7%9a%84%e8%a6%81%e6%b1%82%ef%bc%8c%e7%a1%ae%e4%bf%9d%e5%ae%89%e5%85%a8%20%e5%87%86%e5%a4%87%20Prepare%3a%20%e4%b8%ba%e9%9d%99%e6%80%81%e5%ad%97%e6%ae%b5%e5%88%86%e9%85%8d%e5%86%85%e5%ad%98%e5%b9%b6%e8%ae%be%e7%bd%ae%e5%88%9d%e5%a7%8b%e5%8c%96%e9%bb%98%e8%ae%a4%e5%80%bc%ef%bc%88%e8%a2%abfinal%e4%bf%ae%e9%a5%b0%e7%9a%84static%e5%ad%97%e6%ae%b5%e4%b8%8d%e4%bc%9a%e8%ae%be%e7%bd%ae%ef%bc%8c%e5%9c%a8%e7%bc%96%e8%af%91%e9%98%b6%e6%ae%b5%e5%b0%b1%e5%88%86%e9%85%8d%e4%ba%86%ef%bc%89%20%e8%a7%a3%e6%9e%90%20Resolve%3a%20%e8%a7%a3%e6%9e%90%e6%98%af%e4%b8%ba%e4%ba%86%e5%b0%86%e5%b8%b8%e9%87%8f%e8%bf%9f%e7%9a%84%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bd%ac%e6%8d%a2%e4%b8%ba%e7%9b%b4%e6%8e%a5%e5%bc%95%e7%94%a8%28%e5%ae%9e%e9%99%85%e5%bc%95%e7%94%a8%29%ef%bc%8c%e5%a6%82%e6%9e%9c%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e6%8c%87%e5%90%91%e6%9c%aa%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%ef%bc%8c%e6%88%96%e6%9c%aa%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%e7%9a%84%e5%ad%97%e6%ae%b5%e6%88%96%e6%96%b9%e6%b3%95%ef%bc%8c%e9%82%a3%e4%b9%88%e8%a7%a3%e6%9e%90%e8%a7%a6%e5%8f%91%e4%ba%86%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84%e5%8a%a0%e8%bd%bd%ef%bc%88%e4%bd%86%e6%98%af%e4%b8%8d%e4%b8%80%e5%ae%9a%e8%a7%a6%e5%8f%91%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84Linking%e5%92%8cInitialization%ef%bc%89%20%e7%ac%ac%e4%b8%89%e4%b8%aa%e9%98%b6%e6%ae%b5%20Initialization%20%e5%88%9d%e5%a7%8b%e5%8c%96%e9%98%b6%e6%ae%b5%e6%98%af%e6%89%a7%e8%a1%8c%e7%b1%bb%e7%9a%84%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%ef%bc%8cinit%28%29%20%e7%9a%84%e8%bf%87%e7%a8%8b%2c%28%e7%bc%96%e8%af%91%e5%99%a8%e8%87%aa%e5%8a%a8%e6%94%b6%e9%9b%86%e7%b1%bb%e7%9a%84%e6%89%80%e6%9c%89%e5%8f%98%e9%87%8f%e8%b5%8b%e5%80%bc%e5%8a%a8%e4%bd%9c%e5%92%8c%e9%9d%99%e6%80%81%e4%bb%a3%e7%a0%81%e5%9d%97%e8%af%ad%e5%8f%a5%e5%90%88%e5%b9%b6%e7%9a%84%ef%bc%89%20%e8%8b%a5%e8%af%a5%e7%b1%bb%e6%9c%89%e7%88%b6%e7%b1%bb%2cJVM%e4%bf%9d%e8%af%81%e7%88%b6%e7%b1%bb%e5%85%88%e6%89%a7%e8%a1%8cinit%e7%84%b6%e5%90%8e%e6%89%a7%e8%a1%8c%e5%ad%90%e7%b1%bb%e7%9a%84init%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e5%88%86%e7%b1%bb%20%e4%b8%8a%e9%9d%a2%e6%8f%8f%e8%bf%b0%e4%ba%86%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e6%9c%ba%e5%88%b6%ef%bc%8c%e9%82%a3%e4%b9%88%e7%94%a8%e4%ba%8e%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%bb%84%e4%bb%b6%e6%88%91%e4%bb%ac%e5%8f%ab%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%ef%bc%8c%e8%80%8c%e4%b8%94%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e6%98%af%e6%9c%89%e5%88%86%e7%b1%bb%e7%9a%84%0aBootstrap%20ClassLoader%20%e5%90%af%e5%8a%a8%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%ef%bc%8c%e6%98%afJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e7%9a%84%ef%bc%8cJava%e8%af%ad%e8%a8%80%e7%a8%8b%e5%ba%8f%e6%97%a0%e6%b3%95%e7%9b%b4%e6%8e%a5%e6%93%8d%e4%bd%9c%ef%bc%8c%e4%b8%bb%e8%a6%81%e7%94%a8%e6%9d%a5%e5%8a%a0%e8%bd%bdJava%e6%a0%b8%e5%bf%83%e7%b1%bb%e5%ba%93%ef%bc%8c%e8%af%b8%e5%a6%82rt.jar%e3%80%81resources.jar%e3%80%81sun.boot.class.path%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e5%8c%85%ef%bc%8c%e7%94%a8%e4%ba%8eJVM%e8%bf%90%e8%a1%8c%e6%89%80%e9%9c%80%e7%9a%84%e5%8c%85%ef%bc%88%e4%b8%80%e8%88%ac%e5%8f%aa%e5%8a%a0%e8%bd%bd%20%e5%8c%85%e5%90%8d%e4%b8%bajava%e3%80%81javax%e3%80%81sun%e5%bc%80%e5%a4%b4%e7%9a%84%e7%b1%bb%ef%bc%89%0a%e5%ae%83%e5%8a%a0%e8%bd%bdExtension%20ClassLoader%e5%92%8cApplication%20ClassLoader%ef%bc%8c%e5%b9%b6%e6%88%90%e4%b8%ba%e5%ae%83%e4%bb%ac%e7%9a%84%e7%88%b6%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%0aExtension%20ClassLoader%20%e6%89%a9%e5%b1%95%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%28sun.misc.Launcher%24ExtClassLoader%e5%ae%9e%e7%8e%b0%29%2c%20%e6%b4%be%e7%94%9f%e7%bb%a7%e6%89%bf%20java.lang.ClassLoader%2c%20%e7%88%b6%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e6%98%af%20%e5%90%af%e5%8a%a8%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%2c%20%e5%8a%a0%e8%bd%bd%20lib%2fext%20%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e5%8a%a0%e8%bd%bd%e7%b1%bb%e5%ba%93%e3%80%82%e5%8f%af%e4%bb%a5%e5%b0%86%e8%87%aa%e5%b7%b1%e7%9a%84%e5%8c%85%e6%94%be%e5%88%b0%e8%af%a5%e7%9b%ae%e5%bd%95%e4%b8%8b%ef%bc%8c%e5%b0%b1%e4%bc%9a%e8%87%aa%e5%8a%a8%e5%8a%a0%e8%bd%bd%e8%bf%9b%e5%85%a5" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&t=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">JVM类加载机制</h1><div class=meta><div class=postdate><time datetime="2022-05-03 17:30:49 +0800 +0800" itemprop=datePublished>2022-05-03</time></div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=/categories/tech>Tech</a></div></div></header><div id=toc><nav id=TableOfContents><ul><li><a href=#类加载系统>类加载系统</a></li><li><a href=#类生命周期>类生命周期</a></li><li><a href=#类加载过程>类加载过程</a></li><li><a href=#类加载器的分类>类加载器的分类</a></li><li><a href=#类加载机制>类加载机制</a></li><li><a href=#其他加载类的方式>其他加载类的方式</a></li><li><a href=#为什么使用-双亲委派机制>为什么使用 双亲委派机制</a></li></ul></nav></div><div class=content itemprop=articleBody><h2 id=类加载系统>类加载系统</h2><p><code>JVM</code>核心的结构里面有一个就是 类加载系统。 一个<code>java</code>代码经过编译器后变成<code>class字节码文件</code>，后续在运行时，字节码需要通过<code>JVM</code>的类加载系统执行运行。</p><p>类加载系统</p><ul><li>类的加载过程</li><li>类的生命周期</li><li>类加载器种类</li><li>类加载机制</li></ul><h2 id=类生命周期>类生命周期</h2><p>类的生命周期包括: 加载、链接（验证、准备、解析）、初始化、使用和卸载，</p><ul><li><p>加载</p><ul><li>通过类全限定名来获取二进制字节流、</li><li>字节流描述的静态存储结构转换为<code>方法区</code>的运行时数据结构</li><li>在<code>Heap</code>中生成一个代表这个类的<code>Class</code>对象，作为方法区访问这些数据的入口</li></ul></li><li><p>链接</p><ul><li><p>验证 确保被加载的类的正确性</p><ul><li>文件格式验证，字节流是否符合<code>Class</code>文件格式，如<code>0xCAFFBABE</code>开头、版本号、常量类型等等</li><li>元数据验证, 多字节码描述性信息进行语义分析、确保符合规范</li><li>字节码验证</li><li>符号引用验证</li></ul></li><li><p>准备 为类的 静态变量 分配内存，并将其初始化成默认值</p></li><li><p>解析
把类中的符号引用转换为直接引用(直接指向目标的指针、相对偏移量或间接定位到目标的句柄),
主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄、调用点限定符等符号引用进行。</p></li></ul></li></ul><h2 id=类加载过程>类加载过程</h2><p>加载、链接（验证、准备、解析）、初始化 属于 类加载的过程</p><p><img src=/jvm/JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B.png alt=类加载过程></p><p>类加载过程从上图可看见</p><ul><li>第一个阶段 <code>Loading</code></li></ul><blockquote><p>通过类的全限定名获取到该类的<code>class</code>二进制字节码流数据，将二进制流数据代表的静态存储结构转换成方法区运行时的数据结构</p></blockquote><ul><li>第二个阶段 <code>Linking</code><ul><li>验证 <code>Verify</code>: 保证<code>class</code>文件字节流是符合<code>JVM</code>的要求，确保安全</li><li>准备 <code>Prepare</code>: 为静态字段分配内存并设置初始化默认值（被<code>final</code>修饰的<code>static</code>字段不会设置，在编译阶段就分配了）</li><li>解析 <code>Resolve</code>: 解析是为了将常量迟的符号引用转换为直接引用(实际引用)，如果符号引用指向未被加载的类，或未被加载的类的字段或方法，那么解析触发了这个类的加载（但是不一定触发这个类的<code>Linking</code>和<code>Initialization</code>）</li></ul></li><li>第三个阶段 <code>Initialization</code></li></ul><blockquote><p>初始化阶段是执行类的构造方法，<code>init()</code> 的过程,(编译器自动收集类的所有变量赋值动作和静态代码块语句合并的）
若该类有父类,<code>JVM</code>保证父类先执行<code>init</code>然后执行子类的<code>init</code></p></blockquote><h2 id=类加载器的分类>类加载器的分类</h2><p>上面描述了类加载的机制，那么用于类加载的组件我们叫类加载器，而且类加载器是有分类的</p><ul><li><code>Bootstrap ClassLoader</code></li></ul><blockquote><p>启动类加载器，是<code>JVM</code>内部实现的，<code>Java</code>语言程序无法直接操作，主要用来加载<code>Java</code>核心类库，诸如<code>rt.jar</code>、<code>resources.jar</code>、<code>sun.boot.class.path</code>目录下的包，用于<code>JVM</code>运行所需的包（一般只加载 包名为<code>java</code>、<code>javax</code>、<code>sun</code>开头的类）</p><p>它加载<code>Extension ClassLoader</code>和<code>Application ClassLoader</code>，并成为它们的父类加载器</p></blockquote><ul><li><code>Extension ClassLoader</code></li></ul><blockquote><p>扩展类加载器(<code>sun.misc.Launcher$ExtClassLoader</code>实现), 派生继承 <code>java.lang.ClassLoader</code>, 父类加载器是 启动类加载器, 加载 <code>lib/ext</code> 目录下的加载类库。可以将自己的包放到该目录下，就会自动加载进入</p></blockquote><ul><li><code>Application ClassLoader</code></li></ul><blockquote><p>应用程序类加载器(<code>sun.misc.Launcher$AppClassLoader</code>实现), 派生继承 <code>java.lang.ClassLoader</code>, 父类加载器是 启动类加载器，加载 <code>classpath</code> 或系统 <code>java.class.path</code> 路径洗的类库</p><p>程序的默认的类加载器，<code>Java</code>程序中的类，由它加载完成</p></blockquote><ul><li>&mldr; (自定义类加载器)</li></ul><blockquote><p>在开发过程中，可能需要使用到一些操作，可以自定义类加载器，达到一些方式，比如应用程序的启动自动激活检查等等，或者密钥的验证等等。
可以开发自定义的网络加载 <code>Java</code> 类, 并进行加解密操作</p><p>实现自定义类加载器的过程</p><ul><li>继承 <code>java.lang.ClassLoader</code>，重写 <code>findClass()</code> 方法</li><li>也可以继承 <code>URLClassLoader</code>类，重写 <code>loadClass()</code> 方法（可以参考 <code>AppClassLoader</code> 或 <code>ExtClassLoader</code>）</li></ul></blockquote><h2 id=类加载机制>类加载机制</h2><p><code>JVM</code> 对 class文件 采用的是 按需加载 方式，只有需要使用到这个类的时候，JVM才会将其 class文件加载到内存中并产生 class对象</p><p>采用的机制： 双亲委派机制，即把加载请求交给父类处理的一直任务模式</p><p><img src=/jvm/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6.png alt=类加载机制></p><p>工作方式:</p><ul><li>一个 类加载器 接收到 类加载 请求，会先将这个请求委托给 父类加载器 执行，</li><li>父类加载器 还存在 父类加载器，则一直向上委托，直到 <code>Bootstrap ClassLoader</code></li><li>父类加载器 完成加载任务，则直接返回成功结果，否则的话，则交由 子类 尝试加载，如果子类也加载失败，则抛出 <code>ClassNotFoundException</code></li></ul><p>类加载的方式</p><ul><li>命令行应用启动 交给 <code>JVM</code> 初始化加载</li><li>通过 <code>Class.forName()</code> 来完成动态加载</li><li>通过 <code>ClassLoader.loadClass()</code> 动态加载</li></ul><h2 id=其他加载类的方式>其他加载类的方式</h2><p>在 <code>JVM</code> 体系中，并不是所有的类加载都是 使用的 双亲委派机制 加载的，也有一些是使用的是 <code>SPI</code>(<code>Service Provider Interface</code>) 服务提供者接口实现的。</p><p>定义 <code>SPI</code>，是为了允许接口的实现由第三方提供，诸如 <code>JDBC</code>、<code>JNDI</code> 等等，这些 <code>SPI</code> 的接口都是属于 <code>Java</code> 核心库，一般在 <code>rt.jar</code> 中，由 <code>Bootstrap ClassLoader</code> 加载，
但是 <code>Bootstrap ClassLoader</code> 是由第三方提供实现的，所以它无法直接加载这些实现类，且同时存在 双亲委派机制 的迷失，<code>Bootstrap ClassLoader</code> 也无法反向委托给其他 <code>ClassLoader</code> 来加载 <code>SPI</code> 的实现类
这样的，就需要一种特殊的类加载器来完成加载这种第三方提供实现的类库（<code>线程上下文类加载器</code>）</p><p><img src=/jvm/%E5%8F%8C%E5%90%91%E5%A7%94%E6%89%98%E5%92%8C%E5%8F%8D%E5%8F%8C%E5%90%91%E5%A7%94%E6%89%98.png alt=双向委托和反双向委托></p><p>从上图可以看出：</p><ul><li>左侧为 双向委托模型</li></ul><blockquote><p>上面介绍了，接收到加载请求，向父类加载器委托，这里不重复了</p></blockquote><ul><li>右侧为 反双向委托模型</li></ul><blockquote><p>原因 由第三方提供了这些核心的SPI接口的实现，而 <code>Bootstrap ClassLoader</code> 并不能加载除了除了<code>rt.jar</code>以外的包且受限双向模式，无法直接加载第三方实现提供的 <code>jar</code> 包.
只能委托 (中间商) <code>线程上下文类加载器</code> <code>ContextClassLoader</code> 去加载 <code>jdbc.jar</code> 里面实现的 <code>SPI 核心接口的实现类</code> 到内存中。</p><p>其在执行过程中，抛弃了 <code>双亲委派加载链</code> 的模式，使得程序可以逆向使用类加载器，其实是对类加载器的一个补充，使得其更灵活</p></blockquote><h2 id=为什么使用-双亲委派机制>为什么使用 双亲委派机制</h2><p>OK，回答这个问题,我们先假设并没有这个限制，在 <code>rt.jar</code> 中随便找一个类 <code>HashMap</code>, 我同时在自定义的程序里面也写一个一样的类放在 <code>ClassPath</code> 下，那么这两个类就需要采用不同的类加载器，
那时候，系统中出现了两个不同的 <code>HashMap</code>，这样会导致程序混乱。</p></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="pinkhello",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&text=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&is_video=false&description=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6&body=Check out this article: https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&title=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&name=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6&description=%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%20JVM%e6%a0%b8%e5%bf%83%e7%9a%84%e7%bb%93%e6%9e%84%e9%87%8c%e9%9d%a2%e6%9c%89%e4%b8%80%e4%b8%aa%e5%b0%b1%e6%98%af%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%e3%80%82%20%e4%b8%80%e4%b8%aajava%e4%bb%a3%e7%a0%81%e7%bb%8f%e8%bf%87%e7%bc%96%e8%af%91%e5%99%a8%e5%90%8e%e5%8f%98%e6%88%90class%e5%ad%97%e8%8a%82%e7%a0%81%e6%96%87%e4%bb%b6%ef%bc%8c%e5%90%8e%e7%bb%ad%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%ef%bc%8c%e5%ad%97%e8%8a%82%e7%a0%81%e9%9c%80%e8%a6%81%e9%80%9a%e8%bf%87JVM%e7%9a%84%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%e6%89%a7%e8%a1%8c%e8%bf%90%e8%a1%8c%e3%80%82%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%b3%bb%e7%bb%9f%0a%e7%b1%bb%e7%9a%84%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%20%e7%b1%bb%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%a7%8d%e7%b1%bb%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6%20%e7%b1%bb%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%20%e7%b1%bb%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%8c%85%e6%8b%ac%3a%20%e5%8a%a0%e8%bd%bd%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%88%e9%aa%8c%e8%af%81%e3%80%81%e5%87%86%e5%a4%87%e3%80%81%e8%a7%a3%e6%9e%90%ef%bc%89%e3%80%81%e5%88%9d%e5%a7%8b%e5%8c%96%e3%80%81%e4%bd%bf%e7%94%a8%e5%92%8c%e5%8d%b8%e8%bd%bd%ef%bc%8c%0a%e5%8a%a0%e8%bd%bd%0a%e9%80%9a%e8%bf%87%e7%b1%bb%e5%85%a8%e9%99%90%e5%ae%9a%e5%90%8d%e6%9d%a5%e8%8e%b7%e5%8f%96%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%ad%97%e8%8a%82%e6%b5%81%e3%80%81%20%e5%ad%97%e8%8a%82%e6%b5%81%e6%8f%8f%e8%bf%b0%e7%9a%84%e9%9d%99%e6%80%81%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e4%b8%ba%e6%96%b9%e6%b3%95%e5%8c%ba%e7%9a%84%e8%bf%90%e8%a1%8c%e6%97%b6%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%20%e5%9c%a8Heap%e4%b8%ad%e7%94%9f%e6%88%90%e4%b8%80%e4%b8%aa%e4%bb%a3%e8%a1%a8%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84Class%e5%af%b9%e8%b1%a1%ef%bc%8c%e4%bd%9c%e4%b8%ba%e6%96%b9%e6%b3%95%e5%8c%ba%e8%ae%bf%e9%97%ae%e8%bf%99%e4%ba%9b%e6%95%b0%e6%8d%ae%e7%9a%84%e5%85%a5%e5%8f%a3%20%e9%93%be%e6%8e%a5%0a%e9%aa%8c%e8%af%81%20%e7%a1%ae%e4%bf%9d%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%e7%9a%84%e6%ad%a3%e7%a1%ae%e6%80%a7%0a%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%e9%aa%8c%e8%af%81%ef%bc%8c%e5%ad%97%e8%8a%82%e6%b5%81%e6%98%af%e5%90%a6%e7%ac%a6%e5%90%88Class%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f%ef%bc%8c%e5%a6%820xCAFFBABE%e5%bc%80%e5%a4%b4%e3%80%81%e7%89%88%e6%9c%ac%e5%8f%b7%e3%80%81%e5%b8%b8%e9%87%8f%e7%b1%bb%e5%9e%8b%e7%ad%89%e7%ad%89%20%e5%85%83%e6%95%b0%e6%8d%ae%e9%aa%8c%e8%af%81%2c%20%e5%a4%9a%e5%ad%97%e8%8a%82%e7%a0%81%e6%8f%8f%e8%bf%b0%e6%80%a7%e4%bf%a1%e6%81%af%e8%bf%9b%e8%a1%8c%e8%af%ad%e4%b9%89%e5%88%86%e6%9e%90%e3%80%81%e7%a1%ae%e4%bf%9d%e7%ac%a6%e5%90%88%e8%a7%84%e8%8c%83%20%e5%ad%97%e8%8a%82%e7%a0%81%e9%aa%8c%e8%af%81%20%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e9%aa%8c%e8%af%81%20%e5%87%86%e5%a4%87%20%e4%b8%ba%e7%b1%bb%e7%9a%84%20%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f%20%e5%88%86%e9%85%8d%e5%86%85%e5%ad%98%ef%bc%8c%e5%b9%b6%e5%b0%86%e5%85%b6%e5%88%9d%e5%a7%8b%e5%8c%96%e6%88%90%e9%bb%98%e8%ae%a4%e5%80%bc%0a%e8%a7%a3%e6%9e%90%20%e6%8a%8a%e7%b1%bb%e4%b8%ad%e7%9a%84%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bd%ac%e6%8d%a2%e4%b8%ba%e7%9b%b4%e6%8e%a5%e5%bc%95%e7%94%a8%28%e7%9b%b4%e6%8e%a5%e6%8c%87%e5%90%91%e7%9b%ae%e6%a0%87%e7%9a%84%e6%8c%87%e9%92%88%e3%80%81%e7%9b%b8%e5%af%b9%e5%81%8f%e7%a7%bb%e9%87%8f%e6%88%96%e9%97%b4%e6%8e%a5%e5%ae%9a%e4%bd%8d%e5%88%b0%e7%9b%ae%e6%a0%87%e7%9a%84%e5%8f%a5%e6%9f%84%29%2c%20%e4%b8%bb%e8%a6%81%e9%92%88%e5%af%b9%e7%b1%bb%e6%88%96%e6%8e%a5%e5%8f%a3%e3%80%81%e5%ad%97%e6%ae%b5%e3%80%81%e7%b1%bb%e6%96%b9%e6%b3%95%e3%80%81%e6%8e%a5%e5%8f%a3%e6%96%b9%e6%b3%95%e3%80%81%e6%96%b9%e6%b3%95%e7%b1%bb%e5%9e%8b%e3%80%81%e6%96%b9%e6%b3%95%e5%8f%a5%e6%9f%84%e3%80%81%e8%b0%83%e7%94%a8%e7%82%b9%e9%99%90%e5%ae%9a%e7%ac%a6%e7%ad%89%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bf%9b%e8%a1%8c%e3%80%82%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%20%e5%8a%a0%e8%bd%bd%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%88%e9%aa%8c%e8%af%81%e3%80%81%e5%87%86%e5%a4%87%e3%80%81%e8%a7%a3%e6%9e%90%ef%bc%89%e3%80%81%e5%88%9d%e5%a7%8b%e5%8c%96%20%e5%b1%9e%e4%ba%8e%20%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e8%bf%87%e7%a8%8b%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e8%bf%87%e7%a8%8b%e4%bb%8e%e4%b8%8a%e5%9b%be%e5%8f%af%e7%9c%8b%e8%a7%81%0a%e7%ac%ac%e4%b8%80%e4%b8%aa%e9%98%b6%e6%ae%b5%20Loading%20%e9%80%9a%e8%bf%87%e7%b1%bb%e7%9a%84%e5%85%a8%e9%99%90%e5%ae%9a%e5%90%8d%e8%8e%b7%e5%8f%96%e5%88%b0%e8%af%a5%e7%b1%bb%e7%9a%84class%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%ad%97%e8%8a%82%e7%a0%81%e6%b5%81%e6%95%b0%e6%8d%ae%ef%bc%8c%e5%b0%86%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%b5%81%e6%95%b0%e6%8d%ae%e4%bb%a3%e8%a1%a8%e7%9a%84%e9%9d%99%e6%80%81%e5%ad%98%e5%82%a8%e7%bb%93%e6%9e%84%e8%bd%ac%e6%8d%a2%e6%88%90%e6%96%b9%e6%b3%95%e5%8c%ba%e8%bf%90%e8%a1%8c%e6%97%b6%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%0a%e7%ac%ac%e4%ba%8c%e4%b8%aa%e9%98%b6%e6%ae%b5%20Linking%20%e9%aa%8c%e8%af%81%20Verify%3a%20%e4%bf%9d%e8%af%81class%e6%96%87%e4%bb%b6%e5%ad%97%e8%8a%82%e6%b5%81%e6%98%af%e7%ac%a6%e5%90%88JVM%e7%9a%84%e8%a6%81%e6%b1%82%ef%bc%8c%e7%a1%ae%e4%bf%9d%e5%ae%89%e5%85%a8%20%e5%87%86%e5%a4%87%20Prepare%3a%20%e4%b8%ba%e9%9d%99%e6%80%81%e5%ad%97%e6%ae%b5%e5%88%86%e9%85%8d%e5%86%85%e5%ad%98%e5%b9%b6%e8%ae%be%e7%bd%ae%e5%88%9d%e5%a7%8b%e5%8c%96%e9%bb%98%e8%ae%a4%e5%80%bc%ef%bc%88%e8%a2%abfinal%e4%bf%ae%e9%a5%b0%e7%9a%84static%e5%ad%97%e6%ae%b5%e4%b8%8d%e4%bc%9a%e8%ae%be%e7%bd%ae%ef%bc%8c%e5%9c%a8%e7%bc%96%e8%af%91%e9%98%b6%e6%ae%b5%e5%b0%b1%e5%88%86%e9%85%8d%e4%ba%86%ef%bc%89%20%e8%a7%a3%e6%9e%90%20Resolve%3a%20%e8%a7%a3%e6%9e%90%e6%98%af%e4%b8%ba%e4%ba%86%e5%b0%86%e5%b8%b8%e9%87%8f%e8%bf%9f%e7%9a%84%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e8%bd%ac%e6%8d%a2%e4%b8%ba%e7%9b%b4%e6%8e%a5%e5%bc%95%e7%94%a8%28%e5%ae%9e%e9%99%85%e5%bc%95%e7%94%a8%29%ef%bc%8c%e5%a6%82%e6%9e%9c%e7%ac%a6%e5%8f%b7%e5%bc%95%e7%94%a8%e6%8c%87%e5%90%91%e6%9c%aa%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%ef%bc%8c%e6%88%96%e6%9c%aa%e8%a2%ab%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%b1%bb%e7%9a%84%e5%ad%97%e6%ae%b5%e6%88%96%e6%96%b9%e6%b3%95%ef%bc%8c%e9%82%a3%e4%b9%88%e8%a7%a3%e6%9e%90%e8%a7%a6%e5%8f%91%e4%ba%86%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84%e5%8a%a0%e8%bd%bd%ef%bc%88%e4%bd%86%e6%98%af%e4%b8%8d%e4%b8%80%e5%ae%9a%e8%a7%a6%e5%8f%91%e8%bf%99%e4%b8%aa%e7%b1%bb%e7%9a%84Linking%e5%92%8cInitialization%ef%bc%89%20%e7%ac%ac%e4%b8%89%e4%b8%aa%e9%98%b6%e6%ae%b5%20Initialization%20%e5%88%9d%e5%a7%8b%e5%8c%96%e9%98%b6%e6%ae%b5%e6%98%af%e6%89%a7%e8%a1%8c%e7%b1%bb%e7%9a%84%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%ef%bc%8cinit%28%29%20%e7%9a%84%e8%bf%87%e7%a8%8b%2c%28%e7%bc%96%e8%af%91%e5%99%a8%e8%87%aa%e5%8a%a8%e6%94%b6%e9%9b%86%e7%b1%bb%e7%9a%84%e6%89%80%e6%9c%89%e5%8f%98%e9%87%8f%e8%b5%8b%e5%80%bc%e5%8a%a8%e4%bd%9c%e5%92%8c%e9%9d%99%e6%80%81%e4%bb%a3%e7%a0%81%e5%9d%97%e8%af%ad%e5%8f%a5%e5%90%88%e5%b9%b6%e7%9a%84%ef%bc%89%20%e8%8b%a5%e8%af%a5%e7%b1%bb%e6%9c%89%e7%88%b6%e7%b1%bb%2cJVM%e4%bf%9d%e8%af%81%e7%88%b6%e7%b1%bb%e5%85%88%e6%89%a7%e8%a1%8cinit%e7%84%b6%e5%90%8e%e6%89%a7%e8%a1%8c%e5%ad%90%e7%b1%bb%e7%9a%84init%0a%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e7%9a%84%e5%88%86%e7%b1%bb%20%e4%b8%8a%e9%9d%a2%e6%8f%8f%e8%bf%b0%e4%ba%86%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e6%9c%ba%e5%88%b6%ef%bc%8c%e9%82%a3%e4%b9%88%e7%94%a8%e4%ba%8e%e7%b1%bb%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%bb%84%e4%bb%b6%e6%88%91%e4%bb%ac%e5%8f%ab%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%ef%bc%8c%e8%80%8c%e4%b8%94%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e6%98%af%e6%9c%89%e5%88%86%e7%b1%bb%e7%9a%84%0aBootstrap%20ClassLoader%20%e5%90%af%e5%8a%a8%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%ef%bc%8c%e6%98%afJVM%e5%86%85%e9%83%a8%e5%ae%9e%e7%8e%b0%e7%9a%84%ef%bc%8cJava%e8%af%ad%e8%a8%80%e7%a8%8b%e5%ba%8f%e6%97%a0%e6%b3%95%e7%9b%b4%e6%8e%a5%e6%93%8d%e4%bd%9c%ef%bc%8c%e4%b8%bb%e8%a6%81%e7%94%a8%e6%9d%a5%e5%8a%a0%e8%bd%bdJava%e6%a0%b8%e5%bf%83%e7%b1%bb%e5%ba%93%ef%bc%8c%e8%af%b8%e5%a6%82rt.jar%e3%80%81resources.jar%e3%80%81sun.boot.class.path%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e5%8c%85%ef%bc%8c%e7%94%a8%e4%ba%8eJVM%e8%bf%90%e8%a1%8c%e6%89%80%e9%9c%80%e7%9a%84%e5%8c%85%ef%bc%88%e4%b8%80%e8%88%ac%e5%8f%aa%e5%8a%a0%e8%bd%bd%20%e5%8c%85%e5%90%8d%e4%b8%bajava%e3%80%81javax%e3%80%81sun%e5%bc%80%e5%a4%b4%e7%9a%84%e7%b1%bb%ef%bc%89%0a%e5%ae%83%e5%8a%a0%e8%bd%bdExtension%20ClassLoader%e5%92%8cApplication%20ClassLoader%ef%bc%8c%e5%b9%b6%e6%88%90%e4%b8%ba%e5%ae%83%e4%bb%ac%e7%9a%84%e7%88%b6%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%0aExtension%20ClassLoader%20%e6%89%a9%e5%b1%95%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%28sun.misc.Launcher%24ExtClassLoader%e5%ae%9e%e7%8e%b0%29%2c%20%e6%b4%be%e7%94%9f%e7%bb%a7%e6%89%bf%20java.lang.ClassLoader%2c%20%e7%88%b6%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%e6%98%af%20%e5%90%af%e5%8a%a8%e7%b1%bb%e5%8a%a0%e8%bd%bd%e5%99%a8%2c%20%e5%8a%a0%e8%bd%bd%20lib%2fext%20%e7%9b%ae%e5%bd%95%e4%b8%8b%e7%9a%84%e5%8a%a0%e8%bd%bd%e7%b1%bb%e5%ba%93%e3%80%82%e5%8f%af%e4%bb%a5%e5%b0%86%e8%87%aa%e5%b7%b1%e7%9a%84%e5%8c%85%e6%94%be%e5%88%b0%e8%af%a5%e7%9b%ae%e5%bd%95%e4%b8%8b%ef%bc%8c%e5%b0%b1%e4%bc%9a%e8%87%aa%e5%8a%a8%e5%8a%a0%e8%bd%bd%e8%bf%9b%e5%85%a5" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fpinkhello.cc%2fposts%2f52-jvm%25E7%25B1%25BB%25E5%258A%25A0%25E8%25BD%25BD%25E6%259C%25BA%25E5%2588%25B6%2f&t=JVM%e7%b1%bb%e5%8a%a0%e8%bd%bd%e6%9c%ba%e5%88%b6" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 pinkhello</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>
<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>回望K8S 持久化存储 | pinkhello</title><link rel=canonical href=https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/><meta name=description content="👷Hey! 我是 **pinkhello**，💻 一名后端程序员。**重要提示**: 在您阅读文章并评论之前，请先认真阅读[**评论承诺**](http://pinkhello.cc/promise)。"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="回望K8S 持久化存储"><meta property="og:description" content="PV、PVC、StorageClass 说的啥？ PV: 持久化存储数据卷，这个 API 主要定义的是一个持久化存储在宿主机上的一个目录。一般由运维人员进行定义，比如定义一个 NFS 类型的 PV
apiVersion: v1 kind: PersistentVolume metadata: name: nfs spec: storageClassName: manual capacity: storage: 1Gi accessModes: - ReadWriteMany nfs: server: 10.244.1.5 path: &#34;/&#34; PVC: POD 所希望使用的持久化存储的属性. 比如 Volume 的存储大小、可读写权限等. PVC 一般由开发人员创建、或者由 PVC模板的方式成为StatefulSet的一部分，由StatefulSet控制器负责创建带编号的PVC.
# 创建一个 1 GB 大小的PVC --- apiVersion: v1 kind: PersistentVolumeClaim metadata: name: nfs spec: accessModes: - ReadWriteMany storageClassName: manual resources: requests: storage: 1Gi ... 用户创建的PVC要真正的被容器使用的化，需要于心和某个符合条件的PV进行绑定：
第一个条件，PV 和 PVC 的 spec 字段。例如: PV 的存储(storage)大小就必须满足 PVC 的要求 第二个条件，PV 和 PVC 的 storageClassName 字段名称必须一样。 下面是去使用这个PVC"><meta property="og:type" content="article"><meta property="og:url" content="https://pinkhello.cc/posts/22-%E5%9B%9E%E6%9C%9Bk8s-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-05-18T08:00:00+08:00"><meta property="article:modified_time" content="2021-05-18T08:00:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="回望K8S 持久化存储"><meta name=twitter:description content="PV、PVC、StorageClass 说的啥？ PV: 持久化存储数据卷，这个 API 主要定义的是一个持久化存储在宿主机上的一个目录。一般由运维人员进行定义，比如定义一个 NFS 类型的 PV
apiVersion: v1 kind: PersistentVolume metadata: name: nfs spec: storageClassName: manual capacity: storage: 1Gi accessModes: - ReadWriteMany nfs: server: 10.244.1.5 path: &#34;/&#34; PVC: POD 所希望使用的持久化存储的属性. 比如 Volume 的存储大小、可读写权限等. PVC 一般由开发人员创建、或者由 PVC模板的方式成为StatefulSet的一部分，由StatefulSet控制器负责创建带编号的PVC.
# 创建一个 1 GB 大小的PVC --- apiVersion: v1 kind: PersistentVolumeClaim metadata: name: nfs spec: accessModes: - ReadWriteMany storageClassName: manual resources: requests: storage: 1Gi ... 用户创建的PVC要真正的被容器使用的化，需要于心和某个符合条件的PV进行绑定：
第一个条件，PV 和 PVC 的 spec 字段。例如: PV 的存储(storage)大小就必须满足 PVC 的要求 第二个条件，PV 和 PVC 的 storageClassName 字段名称必须一样。 下面是去使用这个PVC"><link rel=stylesheet href=https://pinkhello.cc/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://pinkhello.cc/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-M2FXWC325L","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://pinkhello.cc/posts/20-%E5%9B%9E%E6%9C%9Bk8s-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92%E4%B8%8Ekubernetes%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://pinkhello.cc/posts/24-rocketmq%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E5%BC%80%E7%AF%87/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&text=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&is_video=false&description=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8&body=Check out this article: https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&name=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8&description=PV%e3%80%81PVC%e3%80%81StorageClass%20%e8%af%b4%e7%9a%84%e5%95%a5%ef%bc%9f%20PV%3a%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e6%95%b0%e6%8d%ae%e5%8d%b7%ef%bc%8c%e8%bf%99%e4%b8%aa%20API%20%e4%b8%bb%e8%a6%81%e5%ae%9a%e4%b9%89%e7%9a%84%e6%98%af%e4%b8%80%e4%b8%aa%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e5%9c%a8%e5%ae%bf%e4%b8%bb%e6%9c%ba%e4%b8%8a%e7%9a%84%e4%b8%80%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%80%e8%88%ac%e7%94%b1%e8%bf%90%e7%bb%b4%e4%ba%ba%e5%91%98%e8%bf%9b%e8%a1%8c%e5%ae%9a%e4%b9%89%ef%bc%8c%e6%af%94%e5%a6%82%e5%ae%9a%e4%b9%89%e4%b8%80%e4%b8%aa%20NFS%20%e7%b1%bb%e5%9e%8b%e7%9a%84%20PV%0aapiVersion%3a%20v1%20kind%3a%20PersistentVolume%20metadata%3a%20name%3a%20nfs%20spec%3a%20storageClassName%3a%20manual%20capacity%3a%20storage%3a%201Gi%20accessModes%3a%20-%20ReadWriteMany%20nfs%3a%20server%3a%2010.244.1.5%20path%3a%20%26%2334%3b%2f%26%2334%3b%20PVC%3a%20POD%20%e6%89%80%e5%b8%8c%e6%9c%9b%e4%bd%bf%e7%94%a8%e7%9a%84%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e7%9a%84%e5%b1%9e%e6%80%a7.%20%e6%af%94%e5%a6%82%20Volume%20%e7%9a%84%e5%ad%98%e5%82%a8%e5%a4%a7%e5%b0%8f%e3%80%81%e5%8f%af%e8%af%bb%e5%86%99%e6%9d%83%e9%99%90%e7%ad%89.%20PVC%20%e4%b8%80%e8%88%ac%e7%94%b1%e5%bc%80%e5%8f%91%e4%ba%ba%e5%91%98%e5%88%9b%e5%bb%ba%e3%80%81%e6%88%96%e8%80%85%e7%94%b1%20PVC%e6%a8%a1%e6%9d%bf%e7%9a%84%e6%96%b9%e5%bc%8f%e6%88%90%e4%b8%baStatefulSet%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%ef%bc%8c%e7%94%b1StatefulSet%e6%8e%a7%e5%88%b6%e5%99%a8%e8%b4%9f%e8%b4%a3%e5%88%9b%e5%bb%ba%e5%b8%a6%e7%bc%96%e5%8f%b7%e7%9a%84PVC.%0a%23%20%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%201%20GB%20%e5%a4%a7%e5%b0%8f%e7%9a%84PVC%20---%20apiVersion%3a%20v1%20kind%3a%20PersistentVolumeClaim%20metadata%3a%20name%3a%20nfs%20spec%3a%20accessModes%3a%20-%20ReadWriteMany%20storageClassName%3a%20manual%20resources%3a%20requests%3a%20storage%3a%201Gi%20...%20%e7%94%a8%e6%88%b7%e5%88%9b%e5%bb%ba%e7%9a%84PVC%e8%a6%81%e7%9c%9f%e6%ad%a3%e7%9a%84%e8%a2%ab%e5%ae%b9%e5%99%a8%e4%bd%bf%e7%94%a8%e7%9a%84%e5%8c%96%ef%bc%8c%e9%9c%80%e8%a6%81%e4%ba%8e%e5%bf%83%e5%92%8c%e6%9f%90%e4%b8%aa%e7%ac%a6%e5%90%88%e6%9d%a1%e4%bb%b6%e7%9a%84PV%e8%bf%9b%e8%a1%8c%e7%bb%91%e5%ae%9a%ef%bc%9a%0a%e7%ac%ac%e4%b8%80%e4%b8%aa%e6%9d%a1%e4%bb%b6%ef%bc%8cPV%20%e5%92%8c%20PVC%20%e7%9a%84%20spec%20%e5%ad%97%e6%ae%b5%e3%80%82%e4%be%8b%e5%a6%82%3a%20PV%20%e7%9a%84%e5%ad%98%e5%82%a8%28storage%29%e5%a4%a7%e5%b0%8f%e5%b0%b1%e5%bf%85%e9%a1%bb%e6%bb%a1%e8%b6%b3%20PVC%20%e7%9a%84%e8%a6%81%e6%b1%82%20%e7%ac%ac%e4%ba%8c%e4%b8%aa%e6%9d%a1%e4%bb%b6%ef%bc%8cPV%20%e5%92%8c%20PVC%20%e7%9a%84%20storageClassName%20%e5%ad%97%e6%ae%b5%e5%90%8d%e7%a7%b0%e5%bf%85%e9%a1%bb%e4%b8%80%e6%a0%b7%e3%80%82%20%e4%b8%8b%e9%9d%a2%e6%98%af%e5%8e%bb%e4%bd%bf%e7%94%a8%e8%bf%99%e4%b8%aaPVC" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&t=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">回望K8S 持久化存储</h1><div class=meta><div class=postdate><time datetime="2021-05-18 08:00:00 +0800 +0800" itemprop=datePublished>2021-05-18</time></div><div class=article-category><i class="fas fa-archive"></i>
<a class=category-link href=/categories/tech>Tech</a></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/k8s rel=tag>k8s</a></div></div></header><div id=toc><nav id=TableOfContents></nav></div><div class=content itemprop=articleBody><h1 id=pvpvcstorageclass-说的啥><code>PV</code>、<code>PVC</code>、<code>StorageClass</code> 说的啥？</h1><p><code>PV</code>: 持久化存储数据卷，这个 API 主要定义的是一个持久化存储在宿主机上的一个目录。一般由运维人员进行定义，比如定义一个 NFS 类型的 PV</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PersistentVolume</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfs</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>storageClassName</span>: <span style=color:#ae81ff>manual</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>capacity</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>accessModes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ReadWriteMany</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>nfs</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>server</span>: <span style=color:#ae81ff>10.244.1.5</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#e6db74>&#34;/&#34;</span>
</span></span></code></pre></div><p><code>PVC</code>: POD 所希望使用的持久化存储的属性. 比如 <code>Volume</code> 的存储大小、可读写权限等.
<code>PVC</code> 一般由开发人员创建、或者由 <code>PVC</code>模板的方式成为<code>StatefulSet</code>的一部分，由<code>StatefulSet</code>控制器负责创建带编号的<code>PVC</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># 创建一个 1 GB 大小的PVC</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>PersistentVolumeClaim</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfs</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>accessModes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>ReadWriteMany</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>storageClassName</span>: <span style=color:#ae81ff>manual</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>requests</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>storage</span>: <span style=color:#ae81ff>1Gi</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>用户创建的<code>PVC</code>要真正的被容器使用的化，需要于心和某个符合条件的<code>PV</code>进行绑定：</p><ul><li>第一个条件，<code>PV</code> 和 <code>PVC</code> 的 <code>spec</code> 字段。例如: <code>PV</code> 的存储(<code>storage</code>)大小就必须满足 <code>PVC</code> 的要求</li><li>第二个条件，<code>PV</code> 和 <code>PVC</code> 的 <code>storageClassName</code> 字段名称必须一样。</li></ul><p>下面是去使用这个<code>PVC</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Pod</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>role</span>: <span style=color:#ae81ff>web-frontend</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>web</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>web</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumeMounts</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfs</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>mountPath</span>: <span style=color:#e6db74>&#34;/usr/share/nginx/html&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nfs</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>persistentVolumeClaim</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>claimName</span>: <span style=color:#ae81ff>nfs</span>
</span></span></code></pre></div><p><code>PVC</code> 理解为持久化存储的 接口，它提供了对某种持久化存储的描述，但不提供具体的实现，而这个持久化的实现部分由 <code>PV</code> 完成。</p><p>假设，我们在创建 <code>POD</code> 的时候，系统内并没有合适的 <code>PV</code> 跟它定义的 <code>PVC</code> 绑定，这个时候容器想要使用的 <code>Volume</code> 不存在，怎么办呢？</p><p>在 <code>Kubernetes</code> 内，时机存在一个专门处理持久化存储的控制器，叫做 <code>VolumeController</code>。这个<code>VolumeController</code>维护着多个控制循环,
其中有个循环就是用来撮合 <code>PV</code> 和 <code>PVC</code> 进行绑定的角色，名字叫 <code>PersistentVolumeController</code>. 它会不断的查看当前的每一个 <code>PVC</code>， 是否处于 <code>Bound</code> 状态
如果不是，它会遍历所以的、可用的 <code>PV</code>，并尝试将其与这个声明的PVC进行绑定。这样，<code>Kubernetes</code> 就可以保证用户提交的每一个 <code>PVC</code>，只要有合适的 <code>PV</code> 出现，它能快速的进入绑定状态。
而所谓的绑定，其实就是将这个 <code>PV</code> 对象的名字填充在了 <code>PVC</code> 对象的 <code>spec.volumeName</code> 字段上。接下来 <code>Kubernetes</code> 只要获取到这个 <code>PVC</code> 对象，就一定能够找到它所绑定的 <code>PV</code>.</p><p><code>PV</code> 对象如何变成容器里的一个持久化存储的呢？</p><p>所谓容器的 <code>Volume</code> ，其实就是将一个宿主机上的目录，跟容器里的目录进行绑定挂载在一起的，
所谓的 <code>持久化Volume</code> ，指的就是这个宿主机上的目录，具备<code>持久化</code>,即当目录里面的内容，既不会因为容器的删除而被清理、也不会跟当前的宿主机绑定，当容器进行重启或者在其他节点上重建之后，依然能够挂载到这个 <code>Volume</code>, 访问这些内容，
所以，大多数情况下，持久化的 <code>Volume</code> 的实现，往往依赖一个远程存储服务，比如远程文件存储（<code>NFS</code>、<code>GlusterFS</code>），远程块存储（公有云的远程磁盘）。</p><p><code>持久化</code>宿主机目录的过程，这个形象的成为 <code>两阶段处理</code></p><p>当一个 <code>POD</code> 调度到一个节点上后, <code>Kubelet</code> 就要为这个 <code>POD</code> 创建一个 <code>Volume</code> 目录, 默认情况下 <code>Kubelet</code> 为 <code>Volume</code> 创建的目录如下所示（在宿主机上）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>/var/lib/kubelet/pods/&lt;Pod的ID&gt;/volumes/kubernetes.io~&lt;Volume类型&gt;/&lt;Volume名字&gt;
</span></span></code></pre></div><p>接下来, <code>Kubelet</code> 要做的操作取决于 <code>Volume</code> 类型.
如果 <code>Volume</code> 类型是远程块存储，比如 <code>Google CLoud</code> 的 <code>Persistent Disk</code>, 那么 <code>Kubelet</code> 就需要先调用 <code>Google Cloud</code> 的 <code>API</code>, 将它所提供的 <code>Persistent Disk</code> 挂载到 <code>Pod</code> 所在的宿主机上。
相当于执行了</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>gcloud compute instances attach-disk &lt;虚拟机名字&gt; --disk &lt;远程磁盘名字&gt;
</span></span></code></pre></div><p>为虚拟机挂载远程磁盘的操作，对应的正是 <code>两阶段处理</code> 的第一段。即在 <code>Kubernetes</code> 中的 <code>Attach</code> 阶段。</p><p><code>Attach</code> 阶段后,要能够使用这个远程磁盘, <code>Kubelet</code> 需要进行第二个操作: 即使会这个磁盘设备, 然后将它挂载到宿主机知道的挂载点上。 这一步相当于执行:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 通过lsblk命令获取磁盘设备ID</span>
</span></span><span style=display:flex><span>sudo lsblk
</span></span><span style=display:flex><span><span style=color:#75715e># 格式化成ext4格式</span>
</span></span><span style=display:flex><span>sudo mkfs.ext4 -m <span style=color:#ae81ff>0</span> -F -E lazy_itable_init<span style=color:#f92672>=</span>0,lazy_journal_init<span style=color:#f92672>=</span>0,discard /dev/&lt;磁盘设备ID&gt;
</span></span><span style=display:flex><span><span style=color:#75715e># 挂载到挂载点</span>
</span></span><span style=display:flex><span>sudo mkdir -p /var/lib/kubelet/pods/&lt;Pod的ID&gt;/volumes/kubernetes.io~&lt;Volume类型&gt;/&lt;Volume名字&gt;
</span></span></code></pre></div><p>这个将磁盘设备格式化并挂载到 <code>Volume</code> 宿主机目录的操作,对应的正是 &ldquo;两阶段处理&rdquo; 的第二段: <code>Mount</code></p><p><code>Kubernetes</code> 如何定义和区分这两个阶段的？
在具体的 <code>Volume</code> 插件的实现接口上, <code>Kubernetes</code> 分别给这两个阶段提供了两种不同的参数列表:</p><ul><li>第一阶段 <code>Attach</code>, <code>Kubernetes</code> 提供的可用参数是 <code>nodeName</code>, 即宿主机的名字</li><li>第二阶段 <code>Mount</code>, <code>Kubernetes</code> 提供的可用参数是 <code>dir</code>, 即 <code>Volume</code> 的宿主机目录</li></ul><p>在经过 &ldquo;两阶段处理&rdquo;, 我们得到了一个 <code>持久化</code> 的 <code>Volume</code> 宿主机目录, 然后, <code>Kubelet</code> 只要把这个 <code>Volume</code> 目录通过 <code>CRI</code> 里的 <code>Mounts</code> 参数,传递给 <code>Docker</code>, 然后就可以为 <code>POD</code> 里的容器挂载这个 &ldquo;持久化&rdquo; 的 <code>Volume</code>。</p><p>另外还有一个核心的概念 <code>StorageClass</code>, <code>Kubernetes</code> 为我们提供了一套可以自动创建 <code>PV</code> 的机制, 即 <code>Dynamic Provisioning</code>, 前面人工管理的 <code>PV</code> 方式叫做 <code>Static Provisioning</code>。</p><p><code>Dynamic Provisioning</code> 机制工作的核心, 在于一个名叫 <code>StorageClass</code> 的API对象。而这个对象的作用，就是创建 PV 的模板。<code>StorageClass</code>对象会定义如下两个部分内容:</p><ul><li>第一, <code>PV</code> 的属性。比如 存储类型、<code>Volume</code> 大小等</li><li>第二, 创建这种 <code>PV</code> 需要用到的存储插件。比如 <code>Ceph</code> 等
有这两个信息后, <code>Kubernetes</code> 就可以根据用户提交的 <code>PVC</code>,找到一个对应的 <code>StorageClass</code>，然后 <code>Kubernetes</code> 就好调用该 <code>StorageClass</code> 声明的存储插件, 创建出需要的 <code>PV</code>。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e>#在这个 YAML 文件里，我们定义了一个名叫 block-service 的 StorageClass。</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>storage.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>StorageClass</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>block-service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>provisioner</span>: <span style=color:#ae81ff>kubernetes.io/gce-pd</span> <span style=color:#75715e># GCE PD 存储插件的名字</span>
</span></span><span style=display:flex><span><span style=color:#f92672>parameters</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>pd-ssd</span> <span style=color:#75715e># SSD格式的GCE远程磁盘</span>
</span></span></code></pre></div><h1 id=kubernetes-pv-和-pvc-体系是不是多此一样>Kubernetes PV 和 PVC 体系是不是多此一样</h1><p>Kubernetes 支持多种的持久化 <a href=https://kubernetes.io/docs/concepts/storage/persistent-volumes/#types-of-persistent-volumes>Kubernetes内置的持久化数据卷实现</a></p><p>在通过 <code>PV</code> 和 <code>PVC</code>, 以及 <code>StorageClass</code> 这套存储体系, 为后来添加持久化存储方案,对已有的 <code>Kubernetes</code> 的影响,几乎可以忽略不及。作位用户, <code>POD</code> 的 <code>YAML</code> 和 <code>PVC</code> 的 <code>YAML</code> 并没有任何特殊的改变.</p><h1 id=总结>总结</h1><p><img src=/%E5%9B%9E%E6%9C%9BK8S/pvc-pv-storageclass-check.png alt=PVC-PV设计></p><ul><li><code>PVC</code> 描述 <code>POD</code> 想要使用的持久化存储的属性，比如存储的大小、读写权限。</li><li><code>PV</code> 描述的 一个具体的 <code>Volume</code> 的属性、比如 <code>Volume</code> 的类型、挂载目录、远程存储服务器地址</li><li><code>StorageClass</code> 作用，充当 <code>PV</code> 的模板，只要同属于一个 <code>StorageClass</code> 的 <code>PV</code> 和 <code>PVC</code>，才可以绑定在一起。</li></ul><p><img src=/%E5%9B%9E%E6%9C%9BK8S/pvc-pv.png alt=Kubernetes持久化存储的原理>
<img src=/%E5%9B%9E%E6%9C%9BK8S/CSI.png alt=Kubernetes持久化存储的通过CSI插件操作原理></p><ul><li><code>Driver Registrar</code> 组件负责将插件注册到 <code>kubelet</code> 阶段，请求<code>CSI</code>插件的 <code>Identity服务</code> 获取插件信息</li><li><code>External Provisioner</code> 组件 <code>Provision 阶段</code>, <code>External Provisioner</code> 监听（<code>Watch</code>）了 <code>APIServer</code> 里的 <code>PVC对象</code>。当一个 <code>PVC</code> 被创建时，它就会调用 <code>CSI Controller</code> 的 <code>CreateVolume</code> 方法，为你创建对应 <code>PV</code></li><li><code>External Attacher</code> 组件负责正是 &ldquo;<code>Attach 阶段</code>&rdquo;, 它监听了 <code>APIServer</code> 里的 <code>VolumeAttachment 对象</code>的变化, <code>VolumeAttachment 对象</code>是 <code>Kubernetes</code> 确认一个 <code>Volume</code> 可以进入 <code>Attach 阶段</code> 的重要标志</li></ul></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="pinkhello",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&text=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&is_video=false&description=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8&body=Check out this article: https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&title=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&name=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8&description=PV%e3%80%81PVC%e3%80%81StorageClass%20%e8%af%b4%e7%9a%84%e5%95%a5%ef%bc%9f%20PV%3a%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e6%95%b0%e6%8d%ae%e5%8d%b7%ef%bc%8c%e8%bf%99%e4%b8%aa%20API%20%e4%b8%bb%e8%a6%81%e5%ae%9a%e4%b9%89%e7%9a%84%e6%98%af%e4%b8%80%e4%b8%aa%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e5%9c%a8%e5%ae%bf%e4%b8%bb%e6%9c%ba%e4%b8%8a%e7%9a%84%e4%b8%80%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%80%e8%88%ac%e7%94%b1%e8%bf%90%e7%bb%b4%e4%ba%ba%e5%91%98%e8%bf%9b%e8%a1%8c%e5%ae%9a%e4%b9%89%ef%bc%8c%e6%af%94%e5%a6%82%e5%ae%9a%e4%b9%89%e4%b8%80%e4%b8%aa%20NFS%20%e7%b1%bb%e5%9e%8b%e7%9a%84%20PV%0aapiVersion%3a%20v1%20kind%3a%20PersistentVolume%20metadata%3a%20name%3a%20nfs%20spec%3a%20storageClassName%3a%20manual%20capacity%3a%20storage%3a%201Gi%20accessModes%3a%20-%20ReadWriteMany%20nfs%3a%20server%3a%2010.244.1.5%20path%3a%20%26%2334%3b%2f%26%2334%3b%20PVC%3a%20POD%20%e6%89%80%e5%b8%8c%e6%9c%9b%e4%bd%bf%e7%94%a8%e7%9a%84%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8%e7%9a%84%e5%b1%9e%e6%80%a7.%20%e6%af%94%e5%a6%82%20Volume%20%e7%9a%84%e5%ad%98%e5%82%a8%e5%a4%a7%e5%b0%8f%e3%80%81%e5%8f%af%e8%af%bb%e5%86%99%e6%9d%83%e9%99%90%e7%ad%89.%20PVC%20%e4%b8%80%e8%88%ac%e7%94%b1%e5%bc%80%e5%8f%91%e4%ba%ba%e5%91%98%e5%88%9b%e5%bb%ba%e3%80%81%e6%88%96%e8%80%85%e7%94%b1%20PVC%e6%a8%a1%e6%9d%bf%e7%9a%84%e6%96%b9%e5%bc%8f%e6%88%90%e4%b8%baStatefulSet%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%ef%bc%8c%e7%94%b1StatefulSet%e6%8e%a7%e5%88%b6%e5%99%a8%e8%b4%9f%e8%b4%a3%e5%88%9b%e5%bb%ba%e5%b8%a6%e7%bc%96%e5%8f%b7%e7%9a%84PVC.%0a%23%20%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%201%20GB%20%e5%a4%a7%e5%b0%8f%e7%9a%84PVC%20---%20apiVersion%3a%20v1%20kind%3a%20PersistentVolumeClaim%20metadata%3a%20name%3a%20nfs%20spec%3a%20accessModes%3a%20-%20ReadWriteMany%20storageClassName%3a%20manual%20resources%3a%20requests%3a%20storage%3a%201Gi%20...%20%e7%94%a8%e6%88%b7%e5%88%9b%e5%bb%ba%e7%9a%84PVC%e8%a6%81%e7%9c%9f%e6%ad%a3%e7%9a%84%e8%a2%ab%e5%ae%b9%e5%99%a8%e4%bd%bf%e7%94%a8%e7%9a%84%e5%8c%96%ef%bc%8c%e9%9c%80%e8%a6%81%e4%ba%8e%e5%bf%83%e5%92%8c%e6%9f%90%e4%b8%aa%e7%ac%a6%e5%90%88%e6%9d%a1%e4%bb%b6%e7%9a%84PV%e8%bf%9b%e8%a1%8c%e7%bb%91%e5%ae%9a%ef%bc%9a%0a%e7%ac%ac%e4%b8%80%e4%b8%aa%e6%9d%a1%e4%bb%b6%ef%bc%8cPV%20%e5%92%8c%20PVC%20%e7%9a%84%20spec%20%e5%ad%97%e6%ae%b5%e3%80%82%e4%be%8b%e5%a6%82%3a%20PV%20%e7%9a%84%e5%ad%98%e5%82%a8%28storage%29%e5%a4%a7%e5%b0%8f%e5%b0%b1%e5%bf%85%e9%a1%bb%e6%bb%a1%e8%b6%b3%20PVC%20%e7%9a%84%e8%a6%81%e6%b1%82%20%e7%ac%ac%e4%ba%8c%e4%b8%aa%e6%9d%a1%e4%bb%b6%ef%bc%8cPV%20%e5%92%8c%20PVC%20%e7%9a%84%20storageClassName%20%e5%ad%97%e6%ae%b5%e5%90%8d%e7%a7%b0%e5%bf%85%e9%a1%bb%e4%b8%80%e6%a0%b7%e3%80%82%20%e4%b8%8b%e9%9d%a2%e6%98%af%e5%8e%bb%e4%bd%bf%e7%94%a8%e8%bf%99%e4%b8%aaPVC" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fpinkhello.cc%2fposts%2f22-%25E5%259B%259E%25E6%259C%259Bk8s-%25E6%258C%2581%25E4%25B9%2585%25E5%258C%2596%25E5%25AD%2598%25E5%2582%25A8%2f&t=%e5%9b%9e%e6%9c%9bK8S%20%e6%8c%81%e4%b9%85%e5%8c%96%e5%ad%98%e5%82%a8" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 pinkhello</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/categories>Category</a></li><li><a href=/tags>Tag</a></li><li><a href=/index.xml>Rss</a></li><li><a href=/jobs>Job</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>